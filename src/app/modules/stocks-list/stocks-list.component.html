<div class="container mat-elevation-z8">
  <div class="d-flex justify-content-end pt-3">
    <app-list-search (searchHandler)="search($event)"></app-list-search>
  </div>
  <div class="stock-list-container">
    <div class="loading" *ngIf="loading">
      <div class="backlight-block"></div>
      <mat-spinner [diameter]="30"></mat-spinner>
    </div>
    <table mat-table [dataSource]="dataSource">

      <!-- Number Column -->
      <ng-container matColumnDef="cik">
        <th mat-header-cell *matHeaderCellDef> <div class="column-block">No.</div> </th>
        <td mat-cell *matCellDef="let element"> <div class="column-block">{{element.cik}}</div> </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> <div class="column-block">Name</div> </th>
        <td mat-cell *matCellDef="let element"><div class="column-block" [matTooltip]="element.name" matTooltipPosition="above"> {{element.name}} </div></td>
      </ng-container>

      <!-- Ticker Column -->
      <ng-container matColumnDef="ticker">
        <th mat-header-cell *matHeaderCellDef> <div class="column-block">Ticker</div> </th>
        <td mat-cell *matCellDef="let element"><div class="column-block"> {{element.ticker}} </div></td>
      </ng-container>

      <!-- Type Column -->
      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef> <div class="column-block">Type</div> </th>
        <td mat-cell *matCellDef="let element"><div class="column-block"> {{element.type}} </div></td>
      </ng-container>

      <!-- Active Column -->
      <ng-container matColumnDef="active">
        <th mat-header-cell *matHeaderCellDef> <div class="column-block">Active</div> </th>
        <td mat-cell *matCellDef="let element"><div class="column-block"> {{element.active}} </div></td>
      </ng-container>

      <!-- Last updated Column -->
      <ng-container matColumnDef="last_updated_utc">
        <th mat-header-cell *matHeaderCellDef><div class="column-block"> Last updated </div></th>
        <td mat-cell *matCellDef="let element"><div class="column-block"> {{ element['last_updated_utc'] | date }} </div></td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="cursor-pointer" [routerLink]="['/stocks', row.ticker]"></tr>
    </table>

    <mat-paginator [pageSizeOptions]="[10, 15, 20]"
                   showFirstLastButtons>
    </mat-paginator>
  </div>
</div>
